# üìà 1.2.4 Autogrowth inesperado
**Categoria:** Infraestrutura  
**CI afetado:** Arquivos MDF / NDF / LDF  
**Escopo:** Datafiles / Transaction Log  
**Severidade sugerida:** P2  

---

## üéØ Objetivo

Identificar crescimento autom√°tico inesperado de arquivos de dados e log que possam impactar performance, consumo de storage e estabilidade da inst√¢ncia SQL Server.

---

## üîé Diagn√≥stico Inicial (Quick Triage)

Ferramenta opcional:

- EXEC sp_whoisactive;
```
SELECT name, size, growth, max_size
FROM sys.database_files;
```
---

üß† **An√°lise por DMV**
- **Configura√ß√£o de Autogrowth**
```sql
SELECT 
    name,
    size * 8 / 1024 AS SizeMB,
    growth,
    max_size
FROM sys.database_files;
```
Objetivo:

- Validar configura√ß√£o atual de crescimento autom√°tico

##

- **Uso do Transaction Log**
```sql
SELECT *
FROM sys.dm_db_log_space_usage;
```
Objetivo:

- Identificar crescimento causado por log

##

- **Arquivos em n√≠vel de inst√¢ncia**
```sql
SELECT 
    database_id,
    name,
    size * 8 / 1024 AS SizeMB
FROM sys.master_files;
```
Objetivo:

- Avaliar crescimento geral dos arquivos

---

üñ•Ô∏è **PerfMon (Sistema Operacional)**

Principais contadores:

- LogicalDisk\Disk Writes/sec
- LogicalDisk\Avg. Disk sec/Write
<br>
Objetivo:

- Confirmar impacto do autogrowth no I/O

---

üß∞ **ScriptDBA / Ferramentas Opcionais**

Ferramenta n√£o nativa:

- sp_whoisactive

Uso recomendado para identificar sess√µes gerando crescimento intenso.

---

üß© Poss√≠veis Causas

- Crescimento repentino de dados
- Transaction log sem backup
- √çndices grandes ou rebuild frequente
- Carga ETL intensa
- Configura√ß√£o inadequada de tamanho inicial

---

üõ†Ô∏è **A√ß√µes de Mitiga√ß√£o**

- Ajustar tamanho inicial dos arquivos
- Revisar estrat√©gia de backup de log
- Evitar autogrowth pequeno e frequente
- Planejar crescimento manual controlado
- Monitorar opera√ß√µes de √≠ndice

---

üîÅ **Monitoramento P√≥s-Mitigation**
```sql
SELECT name, size * 8 / 1024 AS SizeMB
FROM sys.database_files;
```
```sql
SELECT *
FROM sys.dm_db_log_space_usage;
```
